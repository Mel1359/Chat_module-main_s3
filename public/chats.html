<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ß–∞—Ç—ã</title>
    <link rel="stylesheet" href="css/chats.css">
</head>
<body>
    <script>
        const token = localStorage.getItem('token');
        console.log('–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–∫–µ–Ω–∞:', token);
        if (!token) {
            console.log('–¢–æ–∫–µ–Ω –Ω–µ –Ω–∞–π–¥–µ–Ω, –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤—Ö–æ–¥–∞');
            window.location.replace('/login');
        }
    </script>

    <header class="main-header">
        <div class="header-logo">STUD</div>
    </header>

    <div class="container">
        <div id="chats-sidebar">
            <h2>–ß–∞—Ç—ã</h2>
            <div id="chats-list">
            </div>
            <button id="new-chat-button" class="new-chat-btn">–ó–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å</button>
        </div>
        
        <div id="chat-container">
            <h1 id="current-chat-name">–í—ã–±–µ—Ä–∏—Ç–µ —á–∞—Ç</h1>
            <div id="chat-box">
            </div>
            <div id="message-form" style="display: none;">
                <div class="message-input-container">
                    <input type="text" id="message-input" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ...">
                    <label for="image-upload" class="attach-button">
                        üìé
                        <input type="file" id="image-upload" accept="image/*" style="display: none;">
                    </label>
                    <button id="send-button">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
                </div>
                <div class="attachment-preview" id="attachment-preview" style="display: none;">
                    <div class="preview-info">
                        <img id="preview-image" src="" alt="Preview">
                        <span>–ü—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ</span>
                    </div>
                    <button id="remove-attachment" class="remove-attachment">√ó</button>
                </div>
            </div>
        </div>
    </div>
    
    <footer class="main-footer">
        ¬© STUD 2025
    </footer>
    
    <div id="userSelectModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>–í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h2>
                <input type="text" id="userSearch" placeholder="–ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è...">
            </div>
            <div class="modal-body">
                <div id="usersList"></div>
            </div>
            <div class="modal-footer">
                <button id="cancelUserSelect">–û—Ç–º–µ–Ω–∞</button>
                <button id="confirmUserSelect" disabled>–í—ã–±—Ä–∞—Ç—å</button>
            </div>
        </div>
    </div>
    
    <script src="/socket.io/socket.io.js"></script>
    <script type="module" src="js/chats.js"></script>
</body>
</html> 